<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Feedback Collection Portal</title>

  <!-- Bootstrap CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >
</head>

<body class="bg-light">

<!-- Navbar -->
<nav class="navbar navbar-dark bg-primary">
  <div class="container-fluid">
    <span class="navbar-brand">Feedback Portal</span>
  </div>
</nav>

<!-- Main Content -->
<div class="container mt-4">

  <!-- Feedback Form -->
  <div class="card p-3">
    <h4>Submit Your Feedback</h4>

    <input
      type="text"
      id="username"
      class="form-control mb-2"
      placeholder="Your Name"
    >

    <textarea
      id="feedback"
      class="form-control mb-2"
      placeholder="Your Feedback"
    ></textarea>

    <button class="btn btn-success" onclick="submitFeedback()">
      Submit
    </button>

    <div
      class="alert alert-success mt-3"
      id="alert"
      style="display:none;"
    >
      Feedback Submitted Successfully
    </div>
  </div>

  <!-- Feedback Display -->
  <div class="mt-4">
  <div class="row" id="feedbackList"></div>
  </div>

</div>

<!-- JavaScript (Merged here) -->
<script>
  let feedbacks = JSON.parse(localStorage.getItem("feedbacks")) || [];

  function displayFeedback() {
    let list = document.getElementById("feedbackList");
    list.innerHTML = "";

    feedbacks.forEach((item, index) => {
      let col = document.createElement("div");
      col.className = "col-md-4";

      col.innerHTML = `
        <div class="card mb-3">
          <div class="card-body">
            <h5 class="card-title">${item.name}</h5>
            <p class="card-text">${item.message}</p>
            <button class="btn btn-danger btn-sm" onclick="deleteFeedback(${index})">
              Delete
            </button>
          </div>
        </div>
      `;
      list.appendChild(col);
    });
  }

  function submitFeedback() {
    let name = document.getElementById("username").value;
    let message = document.getElementById("feedback").value;

    if (name === "" || message === "") {
      alert("Please fill all fields");
      return;
    }

    feedbacks.push({ name: name, message: message });
    localStorage.setItem("feedbacks", JSON.stringify(feedbacks));

    document.getElementById("username").value = "";
    document.getElementById("feedback").value = "";

    document.getElementById("alert").style.display = "block";
    setTimeout(() => {
      document.getElementById("alert").style.display = "none";
    }, 2000);

    displayFeedback();
  }

  function deleteFeedback(index) {
    feedbacks.splice(index, 1);
    localStorage.setItem("feedbacks", JSON.stringify(feedbacks));
    displayFeedback();
  }

  displayFeedback();
</script>

</body>
<footer>Oviya Rethanya S</footer>
</html>